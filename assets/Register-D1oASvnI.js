var b=Object.defineProperty;var p=(g,m)=>b(g,"name",{value:m,configurable:!0});import{r as y,X as C,y as z,A as l,aB as P,Q as s,I as t,al as n,V as R,aC as U,z as E,u as q,M as V}from"./vendor-4TsGYA0n.js";import{u as B}from"./index-Chbkutgr.js";import{_ as F}from"./_plugin-vue_export-helper-y4GvAF8u.js";import{E as c}from"./element-DsYCR5Of.js";const M={class:"wechat-page register-page"},N={class:"register-container"},S={class:"register-header"},D={class:"wechat-logo"},A={class:"register-form"},I={class:"login-link"},L={__name:"Register",setup(g){const m=U(),f=B(),_=y(),r=C({username:"",email:"",nickname:"",password:"",confirmPassword:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:20,message:"昵称长度不能超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:p((d,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==r.password?a(new Error("两次输入密码不一致")):a()},"validateConfirmPassword"),trigger:"blur"}]},w=p(async()=>{try{await _.value.validate();const{confirmPassword:d,...e}=r,a=await f.register(e);a.success?(c.success("注册成功"),m.push("/chat")):c.error(a.message)}catch(d){console.error("注册失败:",d),c.error("注册失败，请重试")}},"handleRegister");return(d,e)=>{const a=n("ChatDotRound"),k=n("el-icon"),u=n("el-input"),i=n("el-form-item"),v=n("el-button"),x=n("el-form");return E(),z("div",M,[l("div",N,[l("div",S,[l("div",D,[s(k,{size:"80",color:"var(--wechat-green)"},{default:t(()=>[s(a)]),_:1})]),e[6]||(e[6]=l("h1",{class:"app-title"},"微信",-1)),e[7]||(e[7]=l("p",{class:"app-subtitle"},"创建你的微信账号",-1))]),l("div",A,[s(x,{ref_key:"registerFormRef",ref:_,model:r,rules:h,onSubmit:R(w,["prevent"])},{default:t(()=>[s(i,{prop:"username"},{default:t(()=>[s(u,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"用户名",size:"large","prefix-icon":"User",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:t(()=>[s(u,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.email=o),placeholder:"邮箱",size:"large","prefix-icon":"Message",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"nickname"},{default:t(()=>[s(u,{modelValue:r.nickname,"onUpdate:modelValue":e[2]||(e[2]=o=>r.nickname=o),placeholder:"昵称（可选）",size:"large","prefix-icon":"UserFilled",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:t(()=>[s(u,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=o=>r.password=o),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:t(()=>[s(u,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=o=>r.confirmPassword=o),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,null,{default:t(()=>[s(v,{type:"primary",loading:q(f).loading,onClick:w,class:"register-btn",size:"large"},{default:t(()=>e[8]||(e[8]=[V(" 注册 ",-1)])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",I,[s(v,{type:"text",onClick:e[5]||(e[5]=o=>d.$router.push("/login")),class:"login-btn-text"},{default:t(()=>e[9]||(e[9]=[V(" 已有账号？立即登录 ",-1)])),_:1,__:[9]})])]),e[10]||(e[10]=P('<div class="register-footer" data-v-80dd0759><p class="footer-text" data-v-80dd0759>注册即表示同意</p><p class="footer-links" data-v-80dd0759><a href="#" class="footer-link" data-v-80dd0759>用户协议</a><span class="footer-separator" data-v-80dd0759>和</span><a href="#" class="footer-link" data-v-80dd0759>隐私政策</a></p></div>',1))])])}}},H=F(L,[["__scopeId","data-v-80dd0759"]]);export{H as default};
