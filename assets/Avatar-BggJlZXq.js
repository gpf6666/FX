import{_ as a}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{r as t,c as s,j as l,y as r,z as e,A as c,K as i,D as v}from"./vendor-BU-zYVMe.js";const u=["src","alt"],d={key:0,class:"avatar-loading"},n={key:1,class:"avatar-fallback"},o=a({__name:"Avatar",props:{src:{type:String,default:""},alt:{type:String,default:"头像"},size:{type:String,default:"medium",validator:a=>["small","medium","large","xlarge"].includes(a)},circle:{type:Boolean,default:!0},fallback:{type:String,default:"/default-avatar.svg"}},setup(a){const o=a,p=t(!1),f=t(!1),m=s((()=>o.src&&""!==o.src.trim()&&(o.src.startsWith("/")||o.src.startsWith("http://")||o.src.startsWith("https://")||o.src.startsWith("data:"))?o.src:o.fallback)),g=()=>{f.value=!0,p.value=!1},y=()=>{p.value=!0,f.value=!1};return l((()=>o.src),(()=>{p.value=!1,f.value=!1})),(t,s)=>(e(),r("div",{class:v(["avatar-container",[`avatar-${a.size}`,{"avatar-circle":a.circle}]])},[c("img",{src:m.value,alt:a.alt,onError:g,onLoad:y,class:v({"avatar-loaded":p.value})},null,42,u),p.value||f.value?i("",!0):(e(),r("div",d,s[0]||(s[0]=[c("div",{class:"loading-spinner"},null,-1)]))),f.value?(e(),r("div",n,s[1]||(s[1]=[c("div",{class:"fallback-icon"},"👤",-1)]))):i("",!0)],2))}},[["__scopeId","data-v-c63d755f"]]);export{o as A};
