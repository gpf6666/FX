var x=Object.defineProperty;var m=(g,p)=>x(g,"name",{value:p,configurable:!0});import{u as y,r as C,a as P,c as R,b as l,d as z,e as s,w as t,f as n,g as U,h as E,o as q,i as F,j as b,E as c}from"./index.js";import{_ as N}from"./_plugin-vue_export-helper.js";const S={class:"wechat-page register-page"},B={class:"register-container"},D={class:"register-header"},M={class:"wechat-logo"},L={class:"register-form"},$={class:"login-link"},j={__name:"Register",setup(g){const p=E(),f=y(),w=C(),r=P({username:"",email:"",nickname:"",password:"",confirmPassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:20,message:"昵称长度不能超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:m((d,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==r.password?a(new Error("两次输入密码不一致")):a()},"validateConfirmPassword"),trigger:"blur"}]},_=m(async()=>{try{await w.value.validate();const{confirmPassword:d,...e}=r,a=await f.register(e);a.success?(c.success("注册成功"),p.push("/chat")):c.error(a.message)}catch(d){console.error("注册失败:",d),c.error("注册失败，请重试")}},"handleRegister");return(d,e)=>{const a=n("ChatDotRound"),h=n("el-icon"),u=n("el-input"),i=n("el-form-item"),v=n("el-button"),k=n("el-form");return q(),R("div",S,[l("div",B,[l("div",D,[l("div",M,[s(h,{size:"80",color:"var(--wechat-green)"},{default:t(()=>[s(a)]),_:1})]),e[6]||(e[6]=l("h1",{class:"app-title"},"微信",-1)),e[7]||(e[7]=l("p",{class:"app-subtitle"},"创建你的微信账号",-1))]),l("div",L,[s(k,{ref_key:"registerFormRef",ref:w,model:r,rules:V,onSubmit:U(_,["prevent"])},{default:t(()=>[s(i,{prop:"username"},{default:t(()=>[s(u,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"用户名",size:"large","prefix-icon":"User",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:t(()=>[s(u,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.email=o),placeholder:"邮箱",size:"large","prefix-icon":"Message",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"nickname"},{default:t(()=>[s(u,{modelValue:r.nickname,"onUpdate:modelValue":e[2]||(e[2]=o=>r.nickname=o),placeholder:"昵称（可选）",size:"large","prefix-icon":"UserFilled",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:t(()=>[s(u,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=o=>r.password=o),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:t(()=>[s(u,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=o=>r.confirmPassword=o),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,null,{default:t(()=>[s(v,{type:"primary",loading:F(f).loading,onClick:_,class:"register-btn",size:"large"},{default:t(()=>e[8]||(e[8]=[b(" 注册 ",-1)])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",$,[s(v,{type:"text",onClick:e[5]||(e[5]=o=>d.$router.push("/login")),class:"login-btn-text"},{default:t(()=>e[9]||(e[9]=[b(" 已有账号？立即登录 ",-1)])),_:1,__:[9]})])]),e[10]||(e[10]=z('<div class="register-footer" data-v-2b960477><p class="footer-text" data-v-2b960477>注册即表示同意</p><p class="footer-links" data-v-2b960477><a href="#" class="footer-link" data-v-2b960477>用户协议</a><span class="footer-separator" data-v-2b960477>和</span><a href="#" class="footer-link" data-v-2b960477>隐私政策</a></p></div>',1))])])}}},H=N(j,[["__scopeId","data-v-2b960477"]]);export{H as default};
