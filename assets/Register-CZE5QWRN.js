var e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;import{r as s,X as l,y as o,A as t,aB as i,Q as d,I as n,al as p,V as c,aC as u,z as m,u as g,M as f}from"./vendor-BU-zYVMe.js";import{u as w}from"./index-zPCyQuwE.js";import{_ as h}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{E as v}from"./element-LGSq3epL.js";const _={class:"wechat-page register-page"},y={class:"register-container"},b={class:"register-header"},x={class:"wechat-logo"},V={class:"register-form"},k={class:"login-link"},P=h({__name:"Register",setup(h){const P=u(),z=w(),j=s(),O=l({username:"",email:"",nickname:"",password:"",confirmPassword:""}),U={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:20,message:"昵称长度不能超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:(e,a,r)=>{""===a?r(new Error("请再次输入密码")):a!==O.password?r(new Error("两次输入密码不一致")):r()},trigger:"blur"}]},q=()=>{return s=this,l=null,o=function*(){try{yield j.value.validate();const s=O,{confirmPassword:l}=s,o=((s,l)=>{var o={};for(var t in s)a.call(s,t)&&l.indexOf(t)<0&&(o[t]=s[t]);if(null!=s&&e)for(var t of e(s))l.indexOf(t)<0&&r.call(s,t)&&(o[t]=s[t]);return o})(s,["confirmPassword"]),t=yield z.register(o);t.success?(v.success("注册成功"),P.push("/chat")):v.error(t.message)}catch(s){v.error("注册失败，请重试")}},new Promise(((e,a)=>{var r=e=>{try{i(o.next(e))}catch(r){a(r)}},t=e=>{try{i(o.throw(e))}catch(r){a(r)}},i=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,t);i((o=o.apply(s,l)).next())}));var s,l,o};return(e,a)=>{const r=p("ChatDotRound"),s=p("el-icon"),l=p("el-input"),u=p("el-form-item"),w=p("el-button"),h=p("el-form");return m(),o("div",_,[t("div",y,[t("div",b,[t("div",x,[d(s,{size:"80",color:"var(--wechat-green)"},{default:n((()=>[d(r)])),_:1})]),a[6]||(a[6]=t("h1",{class:"app-title"},"微信",-1)),a[7]||(a[7]=t("p",{class:"app-subtitle"},"创建你的微信账号",-1))]),t("div",V,[d(h,{ref_key:"registerFormRef",ref:j,model:O,rules:U,onSubmit:c(q,["prevent"])},{default:n((()=>[d(u,{prop:"username"},{default:n((()=>[d(l,{modelValue:O.username,"onUpdate:modelValue":a[0]||(a[0]=e=>O.username=e),placeholder:"用户名",size:"large","prefix-icon":"User",class:"wechat-input"},null,8,["modelValue"])])),_:1}),d(u,{prop:"email"},{default:n((()=>[d(l,{modelValue:O.email,"onUpdate:modelValue":a[1]||(a[1]=e=>O.email=e),placeholder:"邮箱",size:"large","prefix-icon":"Message",class:"wechat-input"},null,8,["modelValue"])])),_:1}),d(u,{prop:"nickname"},{default:n((()=>[d(l,{modelValue:O.nickname,"onUpdate:modelValue":a[2]||(a[2]=e=>O.nickname=e),placeholder:"昵称（可选）",size:"large","prefix-icon":"UserFilled",class:"wechat-input"},null,8,["modelValue"])])),_:1}),d(u,{prop:"password"},{default:n((()=>[d(l,{modelValue:O.password,"onUpdate:modelValue":a[3]||(a[3]=e=>O.password=e),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])])),_:1}),d(u,{prop:"confirmPassword"},{default:n((()=>[d(l,{modelValue:O.confirmPassword,"onUpdate:modelValue":a[4]||(a[4]=e=>O.confirmPassword=e),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])])),_:1}),d(u,null,{default:n((()=>[d(w,{type:"primary",loading:g(z).loading,onClick:q,class:"register-btn",size:"large"},{default:n((()=>a[8]||(a[8]=[f(" 注册 ",-1)]))),_:1,__:[8]},8,["loading"])])),_:1})])),_:1},8,["model"]),t("div",k,[d(w,{type:"text",onClick:a[5]||(a[5]=a=>e.$router.push("/login")),class:"login-btn-text"},{default:n((()=>a[9]||(a[9]=[f(" 已有账号？立即登录 ",-1)]))),_:1,__:[9]})])]),a[10]||(a[10]=i('<div class="register-footer" data-v-80dd0759><p class="footer-text" data-v-80dd0759>注册即表示同意</p><p class="footer-links" data-v-80dd0759><a href="#" class="footer-link" data-v-80dd0759>用户协议</a><span class="footer-separator" data-v-80dd0759>和</span><a href="#" class="footer-link" data-v-80dd0759>隐私政策</a></p></div>',1))])])}}},[["__scopeId","data-v-80dd0759"]]);export{P as default};
