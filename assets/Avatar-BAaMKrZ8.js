var g=Object.defineProperty;var l=(t,a)=>g(t,"name",{value:a,configurable:!0});import{_ as p}from"./_plugin-vue_export-helper-y4GvAF8u.js";import{r as i,c as h,j as k,y as c,z as o,A as n,K as u,D as d}from"./vendor-Bqb8d2G-.js";const y=["src","alt"],_={key:0,class:"avatar-loading"},b={key:1,class:"avatar-fallback"},S={__name:"Avatar",props:{src:{type:String,default:""},alt:{type:String,default:"头像"},size:{type:String,default:"medium",validator:l(t=>["small","medium","large","xlarge"].includes(t),"validator")},circle:{type:Boolean,default:!0},fallback:{type:String,default:"/default-avatar.svg"}},setup(t){const a=t,e=i(!1),r=i(!1),v=h(()=>!a.src||a.src.trim()===""?a.fallback:a.src.startsWith("/")||a.src.startsWith("http://")||a.src.startsWith("https://")||a.src.startsWith("data:")?a.src:a.fallback),f=l(()=>{r.value=!0,e.value=!1},"handleImageError"),m=l(()=>{e.value=!0,r.value=!1},"handleImageLoad");return k(()=>a.src,()=>{e.value=!1,r.value=!1}),(x,s)=>(o(),c("div",{class:d(["avatar-container",[`avatar-${t.size}`,{"avatar-circle":t.circle}]])},[n("img",{src:v.value,alt:t.alt,onError:f,onLoad:m,class:d({"avatar-loaded":e.value})},null,42,y),!e.value&&!r.value?(o(),c("div",_,s[0]||(s[0]=[n("div",{class:"loading-spinner"},null,-1)]))):u("",!0),r.value?(o(),c("div",b,s[1]||(s[1]=[n("div",{class:"fallback-icon"},"👤",-1)]))):u("",!0)],2))}},E=p(S,[["__scopeId","data-v-c63d755f"]]);export{E as A};
