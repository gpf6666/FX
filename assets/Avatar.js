import{_ as m}from"./_plugin-vue_export-helper.js";import{r as n,c as g,j as p,y as l,z as c,A as o,K as i,D as u}from"./vendor.js";const h=["src","alt"],k={key:0,class:"avatar-loading"},y={key:1,class:"avatar-fallback"},_={__name:"Avatar",props:{src:{type:String,default:""},alt:{type:String,default:"头像"},size:{type:String,default:"medium",validator:t=>["small","medium","large","xlarge"].includes(t)},circle:{type:Boolean,default:!0},fallback:{type:String,default:"/default-avatar.svg"}},setup(t){const a=t,e=n(!1),r=n(!1),d=g(()=>!a.src||a.src.trim()===""?a.fallback:a.src.startsWith("/")||a.src.startsWith("http://")||a.src.startsWith("https://")||a.src.startsWith("data:")?a.src:a.fallback),v=()=>{r.value=!0,e.value=!1},f=()=>{e.value=!0,r.value=!1};return p(()=>a.src,()=>{e.value=!1,r.value=!1}),(b,s)=>(c(),l("div",{class:u(["avatar-container",[`avatar-${t.size}`,{"avatar-circle":t.circle}]])},[o("img",{src:d.value,alt:t.alt,onError:v,onLoad:f,class:u({"avatar-loaded":e.value})},null,42,h),!e.value&&!r.value?(c(),l("div",k,s[0]||(s[0]=[o("div",{class:"loading-spinner"},null,-1)]))):i("",!0),r.value?(c(),l("div",y,s[1]||(s[1]=[o("div",{class:"fallback-icon"},"👤",-1)]))):i("",!0)],2))}},z=m(_,[["__scopeId","data-v-c63d755f"]]);export{z as A};
