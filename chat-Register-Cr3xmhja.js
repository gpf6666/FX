import{r as k,X as x,y as b,A as l,aB as y,Q as s,I as t,al as n,V as C,aC as z,z as P,u as R,M as _}from"./chat-vendor-BrOh9MUQ.js";import{u as U}from"./chat-index-Dt5A4Wk2.js";import{_ as E}from"./chat-_plugin-vue_export-helper-DlAUqK2U.js";import{E as m}from"./chat-element-C03ZGswg.js";const q={class:"wechat-page register-page"},B={class:"register-container"},F={class:"register-header"},M={class:"wechat-logo"},N={class:"register-form"},S={class:"login-link"},D={__name:"Register",setup(A){const w=z(),p=U(),c=k(),r=x({username:"",email:"",nickname:"",password:"",confirmPassword:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],nickname:[{max:20,message:"昵称长度不能超过20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:(d,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==r.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},g=async()=>{try{await c.value.validate();const{confirmPassword:d,...e}=r,a=await p.register(e);a.success?(m.success("注册成功"),w.push("/chat")):m.error(a.message)}catch(d){console.error("注册失败:",d),m.error("注册失败，请重试")}};return(d,e)=>{const a=n("ChatDotRound"),V=n("el-icon"),u=n("el-input"),i=n("el-form-item"),f=n("el-button"),h=n("el-form");return P(),b("div",q,[l("div",B,[l("div",F,[l("div",M,[s(V,{size:"80",color:"var(--wechat-green)"},{default:t(()=>[s(a)]),_:1})]),e[6]||(e[6]=l("h1",{class:"app-title"},"微信",-1)),e[7]||(e[7]=l("p",{class:"app-subtitle"},"创建你的微信账号",-1))]),l("div",N,[s(h,{ref_key:"registerFormRef",ref:c,model:r,rules:v,onSubmit:C(g,["prevent"])},{default:t(()=>[s(i,{prop:"username"},{default:t(()=>[s(u,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"用户名",size:"large","prefix-icon":"User",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:t(()=>[s(u,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.email=o),placeholder:"邮箱",size:"large","prefix-icon":"Message",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"nickname"},{default:t(()=>[s(u,{modelValue:r.nickname,"onUpdate:modelValue":e[2]||(e[2]=o=>r.nickname=o),placeholder:"昵称（可选）",size:"large","prefix-icon":"UserFilled",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:t(()=>[s(u,{modelValue:r.password,"onUpdate:modelValue":e[3]||(e[3]=o=>r.password=o),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:t(()=>[s(u,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=o=>r.confirmPassword=o),type:"password",placeholder:"确认密码",size:"large","prefix-icon":"Lock","show-password":"",class:"wechat-input"},null,8,["modelValue"])]),_:1}),s(i,null,{default:t(()=>[s(f,{type:"primary",loading:R(p).loading,onClick:g,class:"register-btn",size:"large"},{default:t(()=>e[8]||(e[8]=[_(" 注册 ",-1)])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",S,[s(f,{type:"text",onClick:e[5]||(e[5]=o=>d.$router.push("/login")),class:"login-btn-text"},{default:t(()=>e[9]||(e[9]=[_(" 已有账号？立即登录 ",-1)])),_:1,__:[9]})])]),e[10]||(e[10]=y('<div class="register-footer" data-v-80dd0759><p class="footer-text" data-v-80dd0759>注册即表示同意</p><p class="footer-links" data-v-80dd0759><a href="#" class="footer-link" data-v-80dd0759>用户协议</a><span class="footer-separator" data-v-80dd0759>和</span><a href="#" class="footer-link" data-v-80dd0759>隐私政策</a></p></div>',1))])])}}},X=E(D,[["__scopeId","data-v-80dd0759"]]);export{X as default};
